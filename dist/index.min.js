(()=>{var l=Object.create,o=Object.defineProperty,m=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,h=Object.getOwnPropertyNames,u=Object.getOwnPropertyDescriptor;var E=i=>o(i,"__esModule",{value:!0});var p=(i,t,e)=>{if(E(i),t&&typeof t=="object"||typeof t=="function")for(let n of h(t))!c.call(i,n)&&n!=="default"&&o(i,n,{get:()=>t[n],enumerable:!(e=u(t,n))||e.enumerable});return i},g=i=>i&&i.__esModule?i:p(o(i!=null?l(m(i)):{},"default",{value:i,enumerable:!0}),i);var r=g(require("nanoid")),b=class{constructor(){this.elements=[];this.initialize(),this.updateAllText(),this.showAll(this.elements.map(t=>t.domElement))}initialize(){let t=document.querySelectorAll("[ignite]");t.forEach(e=>{this.createElement(e)}),this.hideAll(t)}hideAll(t){t.forEach(e=>{e.setAttribute("hidden","true")})}showAll(t){t.forEach(e=>{e.removeAttribute("hidden")})}createElement(t){if(t.getAttribute("spargo-id"))return;let e=r.nanoid();t.setAttribute("spargo-id",e);let n=window[t.getAttribute("ignite")]();this.elements.push({id:e,domElement:t,object:n}),this.attachListeners(t,e),n.ignited()}attachListeners(t,e){let n=this.elements.findIndex(s=>s.id===e);Array.from(t.children).forEach(s=>{let a=s.getAttribute("@sync");s.nodeName==="INPUT"&&a&&(s.setAttribute("value",this.elements[n].object[a]),s.addEventListener("input",d=>{this.updateObject(e,n,a,d.target?.value)}))})}updateObject(t,e,n,s){this.elements[e].object[n]=s,this.updateTextById(t)}updateAllText(){this.elements.forEach(t=>{this.updateElementText(t)})}updateTextById(t){let e=this.elements.findIndex(s=>s.id===t),n=this.elements[e];this.updateElementText(n)}updateElementText(t){t.domElement.childNodes.forEach(e=>{let n=e.attributes;if(n){let s=Array.from(n).find(a=>a.name==="@text");s&&(e.textContent=t.object[s.textContent])}})}};})();
