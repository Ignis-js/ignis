"use strict";(()=>{var a=class{constructor(){this.elements=[];this.initialize(),this.updateAllText(),this.showAll(this.elements.map(t=>t.domElement))}initialize(){let t=document.querySelectorAll("[ignite]");t.forEach(e=>{this.createElement(e)}),this.hideAll(t)}hideAll(t){t.forEach(e=>{e.setAttribute("hidden","true")})}showAll(t){t.forEach(e=>{e.removeAttribute("hidden")})}createElement(t){if(t.getAttribute("spargo-id"))return;let e=crypto.randomUUID();t.setAttribute("spargo-id",e);let i=window[t.getAttribute("ignite")]();this.elements.push({id:e,domElement:t,object:i}),this.attachListeners(t,e),i.ignited()}attachListeners(t,e){let i=this.elements.findIndex(n=>n.id===e);Array.from(t.children).forEach(n=>{let s=n.getAttribute("@sync");n.nodeName==="INPUT"&&s&&(n.setAttribute("value",this.elements[i].object[s]),n.addEventListener("input",r=>{var o;this.updateObject(e,i,s,(o=r.target)==null?void 0:o.value)}))})}updateObject(t,e,i,n){this.elements[e].object[i]=n,this.updateTextById(t)}updateAllText(){this.elements.forEach(t=>{this.updateElementText(t)})}updateTextById(t){let e=this.elements.findIndex(n=>n.id===t),i=this.elements[e];this.updateElementText(i)}updateElementText(t){t.domElement.childNodes.forEach(e=>{let i=e.attributes;if(i){let n=Array.from(i).find(s=>s.name==="@text");n&&(e.textContent=t.object[n.textContent])}})}};new a;})();
