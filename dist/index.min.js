"use strict";(()=>{var m=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+s+'" is not supported')});var d=m("nanoid"),r=class{constructor(){this.elements=[];this.updateAllText(),this.showAll(this.elements.map(t=>t.domElement))}initialize(){let t=document.querySelectorAll("[ignite]");t.forEach(e=>{this.createElement(e)}),this.hideAll(t)}hideAll(t){t.forEach(e=>{e.setAttribute("hidden","true")})}showAll(t){t.forEach(e=>{e.removeAttribute("hidden")})}createElement(t){if(t.getAttribute("spargo-id"))return;let e=(0,d.nanoid)();t.setAttribute("spargo-id",e);let i=window[t.getAttribute("ignite")]();this.elements.push({id:e,domElement:t,object:i}),this.attachListeners(t,e),i.ignited()}attachListeners(t,e){let i=this.elements.findIndex(n=>n.id===e);Array.from(t.children).forEach(n=>{let a=n.getAttribute("@sync");n.nodeName==="INPUT"&&a&&(n.setAttribute("value",this.elements[i].object[a]),n.addEventListener("input",l=>{var o;this.updateObject(e,i,a,(o=l.target)==null?void 0:o.value)}))})}updateObject(t,e,i,n){this.elements[e].object[i]=n,this.updateTextById(t)}updateAllText(){this.elements.forEach(t=>{this.updateElementText(t)})}updateTextById(t){let e=this.elements.findIndex(n=>n.id===t),i=this.elements[e];this.updateElementText(i)}updateElementText(t){t.domElement.childNodes.forEach(e=>{let i=e.attributes;if(i){let n=Array.from(i).find(a=>a.name==="@text");n&&(e.textContent=t.object[n.textContent])}})}};})();
